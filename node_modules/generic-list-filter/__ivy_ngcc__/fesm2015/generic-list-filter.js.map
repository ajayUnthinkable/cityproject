{"version":3,"file":"generic-list-filter.js","sources":["../../../projects/generic-list-filter/src/lib/generic-list-filter.component.ts","../../../projects/generic-list-filter/src/lib/generic-list-filter.module.ts","../../../projects/generic-list-filter/src/public-api.ts","../../../projects/generic-list-filter/src/generic-list-filter.ts"],"names":["_.findIndex"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MASa,0BAA0B;AAAG,IAgCxC;AAAgB,QA7BN,mBAAc,GAAG,IAAI,YAAY,EAAE,CAAC;AAChD,QAIE,mBAAc,GAAG,EAAE,CAAC;AACtB,QAAE,qBAAgB,GAAG;AACrB,YAAI,IAAI,EAAC,EAAE;AACX,YAAI,KAAK,EAAC,EAAE;AACZ,SAAG,CAAC;AACJ,QAKE,qBAAgB,GAAG,KAAK,CAAC;AAC3B,QAAE,kBAAa,GAAY,KAAK,CAAC;AACjC,QAAE,eAAU,GAAY,KAAK,CAAC;AAC9B,QAGE,cAAS,GAAG,EAAE,CAAC;AACjB,QAAE,mBAAc,GAAG,KAAK,CAAC;AACzB,QAAE,WAAM,GAAG,KAAK,CAAC;AACjB,QAAE,aAAQ,GAAG,KAAK,CAAC;AACnB,KAImB;AACnB,IACE,QAAQ;AACV,KAAG;AACH,IACE,WAAW;AAAK;AAC0F;AAE1G,QAAE,UAAU,CAAC;AACf,YAAM,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChD,YAAM,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AACxD,YAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;AAC9C,YAAM,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AAC1C,YAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAE;AAC7D,YAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;AACzC,YAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;AACzC,YAAM,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACzB,SAAK,EAAE,IAAI,CAAC,CAAC;AACb,KAAG;AACH,IACE,iBAAiB;AACnB,QAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACxB,QAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AACxF,QAAI,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;AAC7C,KAAG;AACH,IACE,QAAQ;AACV,QAAI,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC/B,KAAG;AACH,IAGE,cAAc,CAAC,IAAI;AACrB,QAAI,IAAI,IAAI,IAAI,MAAM,EAAE;AACxB,YAAM,IAAI,CAAC,QAAQ,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACjE,YAAM,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC1C,YAAM,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAC9B,SAAK;AACL,QAAI,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AACxC,QAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG;AACxD,YAAM,OAAO,GAAG,CAAC,IAAI,KAAK,IAAI,CAAC;AAC/B,SAAK,CAAC,CAAC;AACP,QAAI,OAAO,CAAC,GAAG,CAAC,IAAI,EAAC,IAAI,CAAC,iBAAiB,EAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AACjE,QAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB,KAAG;AACH,IAGE,YAAY;AACd,QAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;AACjC,QAAI,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC/B,QAAI,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC/B,QAAI,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI;AACpC,YAAM,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;AAChD,SAAK,CAAC,CAAC;AACP,QACI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,YAAM,iBAAiB,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;AACvE,SAAK;AACL,QAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;AACnC,QAAI,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;AAC/C,QAAI,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;AAC1D,QAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB,KAAG;AACH,IACE,OAAO,CAAC,IAAY,EAAE,KAAK;AAC7B,QAAI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AAC3B,QAAI,IAAI,IAAI,KAAK,UAAU,EAAE;AAC7B,YAAM,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AAC5B,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AAC1B,SAAK;AAAC,QAAD,CAAC;AACN,KAAG;AACH,IAEE,YAAY;AACd,QAAI,IAAI,OAAO,GAAG;AAClB,YAAM,QAAQ,EAAE,IAAI;AACpB,YAAM,mBAAmB,EAAC,IAAI,CAAC,iBAAiB;AAChD,YAAM,QAAQ,EAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,GAAG,EAAE;AACrD,YAAM,MAAM,EAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,GAAG,EAAE;AACjD,SAAK,CAAA;AACL,QAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACzB,QAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAC7D,KAAG;AACH,IACE,sBAAsB;AACxB,QAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC/B,KAAG;AACH,IAEE,iBAAiB,CAAC,IAAI;AACxB,QAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACxB,QAAI,IAAI,IAAI,GAAGA,SAAW,CAAC,IAAI,CAAC,cAAc,EAAC,CAAC,IAAI;AACpD,YAAM,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;AAC/B,SAAK,CAAC,CAAC;AACP,QAAI,IAAG,IAAI,GAAG,CAAC,CAAC,EAAE;AAClB,YAAM,IAAI,CAAC,gBAAgB,GAAG,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,KAAK,EAAC,CAAC;AAChF,YAAM,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;AAChF,SAAK;AACL,QAAI,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;AACvC,KAAG;AACH,IACE,cAAc,CAAC,MAAM;AACvB,QAAI,IAAI,IAAI,GAAGA,SAAW,CAAC,IAAI,CAAC,cAAc,EAAC,CAAC,IAAI;AACpD,YAAM,OAAO,IAAI,CAAC,IAAI,IAAI,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC;AAC/C,SAAK,CAAC,CAAC;AACP,QAAI,IAAG,IAAI,GAAG,CAAC,CAAC,EAAE;AAClB,YAAM,OAAO,IAAI,CAAC;AAClB,SAAK;AACL,KAAG;AACH,IAEE,YAAY,CAAC,IAAI,EAAE,IAAI;AACzB,QAAI,IAAI,KAAK,GAAG;AAChB,YAAM,IAAI,EAAG,IAAI;AACjB,YAAM,KAAK,EAAE,IAAI;AACjB,SAAK,CAAC;AACN,QAAI,IAAI,IAAI,GAAGA,SAAW,CAAC,IAAI,CAAC,cAAc,EAAC,CAAC,IAAI;AACpD,YAAM,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;AAC/B,SAAK,CAAC,CAAC;AACP,QACI,IAAG,IAAI,GAAG,CAAC,CAAC,EAAE;AAClB,YAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC;AAC7C,YAAM,IAAI,CAAC,gBAAgB,GAAG,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,KAAK,EAAC,CAAC;AAChF,SAAK;AAAC,aAAK;AACX,YAAM,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtC,YAAM,IAAI,CAAC,gBAAgB,GAAG,EAAC,IAAI,EAAC,IAAI,EAAC,KAAK,EAAC,IAAI,EAAC,CAAC;AACrD,SAAK;AACL,QAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AAC3D,KAAG;AACH,IAIE,eAAe;AACjB,QAAI,IAAI,CAAC,QAAQ,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAC/D,QAAI,IAAI,CAAC,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACxC,QAAI,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAClC,QAAI,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;AAC5B,QAAI,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC/B,QAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;AACxB,QAAI,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACzB,QAAI,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;AAChC,QAAI,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AAC7B,QAAI,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AACtD,QAAI,IAAI,CAAC,gBAAgB,GAAG;AAC5B,YAAM,IAAI,EAAC,EAAE;AACb,YAAM,KAAK,EAAC,EAAE;AACd,SAAK,CAAC;AACN,QAAI,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;AAChC,QAAI,IAAI,CAAC,YAAY,EAAE,CAAC;AACxB,KAAG;AACH,IACE,UAAU,CAAC,WAAY;AACzB,QAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAAC,QACrF,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;AAC3D,QAAI,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM,EAAE;AACvC,YAAM,MAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI;AACzC,gBAAQ,QAAQ,IAAI,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE;AACjF,aAAO,CAAC,CAAC;AACT,YAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAC,WAAW,EAAC,QAAQ,GAAC,IAAI,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAA;AAClG,YAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC;AACzD,SAAK;AACL,KAAG;AACH;sDA1MC,SAAS,SAAC,kBACT,QAAQ,EAAE,YAAY,kBACtB;;;;;;;;;;;;;;;;;giGAAsC,w6CAGnC;AAAC;AACN;AAEO,mBAFJ,KAAK;AAAK,wBACV,KAAK;AAAK,6BACV,MAAM;AAAI;;;;;6iDAJZ;;;;;;;;;oBAIc;AAAC;AAAC,MCOJ,uBAAuB;AAAG;mDAVtC,QAAQ,SAAC,kBACR;OAAY,EAAE,CAAC,0BAA0B,CAAC,kBAC1C,OAAO,EAAE,sBACP,YAAY,sBACZ,mBAAmB,sBACnB;AAAW,sBACX;uBAA2B;QAC5B;CACD,OAAO,EAAE,CAAC,0BAA0B,CAAC;YACtC;;;;;;;;;;;;;;;;;0BACI;AAAC;ACnBN;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACkC","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter  } from '@angular/core';\nimport * as moment from 'moment';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'app-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.scss']\n})\nexport class GenericListFilterComponent implements OnInit {\n  @Input() list;\n  @Input() paramList;\n  @Output() onFilterChange = new EventEmitter();\n\n\n  filterKeys1;\n  selectedFilterTabType1; \n  selectedValues = [];\n  selectedCategory = {\n    type:'',\n    value:''\n  };\n  filters;\n  listCopy;\n\n\n  filterKeys;\n  isFiltersApplied = false;\n  openFilterBar: boolean = false;\n  timeFilter: boolean = false;\n  allAppliedFilters;\n  fromTime;\n  toTime;\n  searchKey = '';\n  isCountClicked = false;\n  isData = false;\n  isStatus = false;\n  step;\n  category;\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(): void {\n    //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n    //Add '${implements OnChanges}' to the class.\n    setTimeout(() => {\n      this.filterKeys1 = Object.keys(this.list);\n      this.selectedFilterTabType1 = this.filterKeys1[0];\n      this.fromTime = this.paramList.fromTime;\n      this.toTime = this.paramList.toTime;\n      this.listCopy = JSON.parse(JSON.stringify(this.list)) ;\n      this.isStatus = this.list.isStatus;\n      this.category = this.list.category;\n      this.isData = true;\n    }, 2000);\n  }\n\n  openFilterSideBar() {\n    this.searchKey = '';\n    this.list[this.selectedFilterTabType1] = this.listCopy[this.selectedFilterTabType1];\n    this.openFilterBar = !this.openFilterBar;\n  }\n\n  onCancel() {\n    this.openFilterBar = false;\n  }\n\n\n\n  onRemoveFilter(item) {\n    if (item == 'time') {\n      this.fromTime = moment().subtract(3, 'hours').format('LT');\n      this.toTime = moment().format('LT');\n      this.timeFilter = false;\n    }\n    delete this.allAppliedFilters[item];\n    this.selectedValues = this.selectedValues.filter(obj => {\n      return obj.type !== item;\n    });\n    console.log(item,this.allAppliedFilters,this.selectedValues);\n    this.applyFilters();\n  }\n\n\n\n  applyFilters() {\n    this.isFiltersApplied = true;\n    this.openFilterBar = false;\n    let allAppliedFilters = {};\n    this.selectedValues.forEach(item => {\n      allAppliedFilters[item.type] = item.value;\n    });\n  \n    if (this.timeFilter) {\n      allAppliedFilters['time'] = `${this.fromTime} to ${this.toTime}`;\n    }\n    console.log(allAppliedFilters);\n    this.allAppliedFilters = allAppliedFilters;\n    this.filterKeys = Object.keys(this.allAppliedFilters);\n    this.filterChange();\n  }\n\n  setTime(type: string, event) {\n    this.timeFilter = true;\n    if (type === \"fromTime\") {\n      this.fromTime = event;\n    } else {\n      this.toTime = event;\n    };\n  }\n\n\n  filterChange() {\n    let filters = {\n      isFilter: true,\n      appliedFilterValues:this.allAppliedFilters,\n      fromTime : this.timeFilter ? this.fromTime : '',\n      toTime : this.timeFilter ? this.toTime : ''\n    }\n    console.log(filters);\n    this.onFilterChange && this.onFilterChange.emit(filters);\n  }\n\n  openRestAppliedFilters() {\n    this.isCountClicked = true;\n  }\n\n\n  selectedFilterTab(type) {\n    this.searchKey = '';\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == type;\n    });\n    if(indx > -1) {\n      this.selectedCategory = {type:type,value:this.selectedValues[indx].value};\n      this.selectFilter(this.selectedCategory.value,this.selectedCategory.type);\n    }\n    this.selectedFilterTabType1 = type;\n  }\n\n  isFilterExists(filter) {\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == filter && item.value;\n    });\n    if(indx > -1) {\n      return true;\n    }\n  }\n\n\n  selectFilter(item, type) {\n    let value = {\n      type : type,\n      value: item\n    };\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == type;\n    });\n\n    if(indx > -1) {\n      this.selectedValues[indx].value = item;\n      this.selectedCategory = {type:type,value:this.selectedValues[indx].value};\n    } else {\n      this.selectedValues.push(value);\n      this.selectedCategory = {type:type,value:item};\n    }\n    console.log(this.selectedValues,this.selectedCategory);\n  }\n\n\n\n\n  resetAllFilters() {\n    this.fromTime = moment().subtract(3, 'hours').format('LT');\n    this.toTime = moment().format('LT');\n    this.isFiltersApplied = false;\n    this.timeFilter = false;\n    this.openFilterBar = false;\n    this.searchKey = '';\n    this.filterKeys = '';\n    this.allAppliedFilters = {};\n    this.selectedValues = [];\n    this.selectedFilterTabType1 = this.filterKeys1[0];\n    this.selectedCategory = {\n      type:'',\n      value:''\n    };\n    this.isCountClicked = false;\n    this.filterChange();\n  }\n\n  filterData(searchValue?) {\n    this.list[this.selectedFilterTabType1] = this.listCopy[this.selectedFilterTabType1]; \n    let filterArr = this.list[this.selectedFilterTabType1];\n    if (filterArr && filterArr.length) {\n      const data = filterArr.filter((item) => {\n        return (item.toLowerCase().startsWith(searchValue.trim().toLowerCase()));\n      });\n      console.log(this.searchKey,searchValue,\"data=>\"+data,this.list[this.selectedFilterTabType1])\n      this.list[this.selectedFilterTabType1] = [...data];\n    }\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { NgxMaterialTimepickerModule } from 'ngx-material-timepicker';\nimport { GenericListFilterComponent } from './generic-list-filter.component';\n\n\n\n@NgModule({\n  declarations: [GenericListFilterComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    NgxMaterialTimepickerModule\n  ],\n  exports: [GenericListFilterComponent]\n})\nexport class GenericListFilterModule { }\n","/*\n * Public API Surface of generic-list-filter\n */\n\nexport * from './lib/generic-list-filter.component';\nexport * from './lib/generic-list-filter.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}