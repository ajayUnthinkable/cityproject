/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Output, Input } from '@angular/core';
import { FormControl, Validators, FormBuilder } from '@angular/forms';
import { GoogleLoginService } from '../chalo-google-hybrid-login.service';
import { StatusCode } from '../models';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/forms';
import * as ɵngcc2 from '@angular/common';
import * as ɵngcc3 from '@angular/material/form-field';
import * as ɵngcc4 from '@angular/material/input';
import * as ɵngcc5 from '../directives/number.directive';
import * as ɵngcc6 from 'ng-otp-input';

function MobieLoginComponent_form_1_Template(rf, ctx) { if (rf & 1) {
    const _r3 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "form", 2);
    ɵngcc0.ɵɵelementStart(1, "div");
    ɵngcc0.ɵɵelementStart(2, "mat-form-field", 3);
    ɵngcc0.ɵɵelement(3, "input", 4);
    ɵngcc0.ɵɵelementStart(4, "span", 5);
    ɵngcc0.ɵɵtext(5, "+91\u00A0");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(6, "div", 6);
    ɵngcc0.ɵɵelementStart(7, "button", 7);
    ɵngcc0.ɵɵlistener("click", function MobieLoginComponent_form_1_Template_button_click_7_listener() { ɵngcc0.ɵɵrestoreView(_r3); const ctx_r2 = ɵngcc0.ɵɵnextContext(); return ctx_r2.sendOtp(true); });
    ɵngcc0.ɵɵelementStart(8, "a", 8);
    ɵngcc0.ɵɵtext(9, "Continue");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("formGroup", ctx_r0.sendOtpForm);
    ɵngcc0.ɵɵadvance(7);
    ɵngcc0.ɵɵproperty("disabled", !ctx_r0.sendOtpForm.valid);
} }
const _c0 = function () { return { length: 6, allowNumbersOnly: true, inputClass: "otpInput", containerClass: "otp-wrapper" }; };
function MobieLoginComponent_form_2_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "form", 2);
    ɵngcc0.ɵɵelementStart(1, "div", 9);
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(3, "div", 10);
    ɵngcc0.ɵɵelementStart(4, "ng-otp-input", 11);
    ɵngcc0.ɵɵlistener("onInputChange", function MobieLoginComponent_form_2_Template_ng_otp_input_onInputChange_4_listener($event) { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.onOtpChange($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(5, "div", 6);
    ɵngcc0.ɵɵelementStart(6, "button", 7);
    ɵngcc0.ɵɵlistener("click", function MobieLoginComponent_form_2_Template_button_click_6_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r6 = ɵngcc0.ɵɵnextContext(); return ctx_r6.verifyOtp(); });
    ɵngcc0.ɵɵelementStart(7, "a", 8);
    ɵngcc0.ɵɵtext(8, "Verify");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(9, "div", 12);
    ɵngcc0.ɵɵelementStart(10, "a", 13);
    ɵngcc0.ɵɵtext(11, "Did not recieve OTP? ");
    ɵngcc0.ɵɵelementStart(12, "span", 14);
    ɵngcc0.ɵɵlistener("click", function MobieLoginComponent_form_2_Template_span_click_12_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ctx_r7.sendOtp(false); });
    ɵngcc0.ɵɵtext(13, "Resend OTP");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("formGroup", ctx_r1.verifyOtpForm);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵtextInterpolate1("Please enter the OTP sent to ", ctx_r1.number, "");
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("config", ɵngcc0.ɵɵpureFunction0(4, _c0));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("disabled", !ctx_r1.verifyOtpForm.valid);
} }
export class MobieLoginComponent {
    /**
     * @param {?} fb
     * @param {?} loginService
     */
    constructor(fb, loginService) {
        this.fb = fb;
        this.loginService = loginService;
        this.onSignInResponse = new EventEmitter();
        this.showGoogleSignIn = new EventEmitter();
        this.showsendOtpForm = true;
        this.sendOtpForm = fb.group({
            number: new FormControl('', [Validators.required, Validators.minLength(10), Validators.maxLength(10)])
        });
        this.verifyOtpForm = fb.group({
            otp: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(6)])
        });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (changes['showsendOtpForm']) {
            this.sendOtpForm.reset();
            this.verifyOtpForm.reset();
        }
    }
    /**
     * @param {?} hideSendOtpForm
     * @return {?}
     */
    sendOtp(hideSendOtpForm) {
        /** @type {?} */
        let selectedPhoneNo = this.sendOtpForm.get('number').value;
        this.number = selectedPhoneNo ? selectedPhoneNo : this.number;
        this.loginService.sendOtp(this.number).subscribe((res) => {
            if (hideSendOtpForm) {
                this.showsendOtpForm = false;
                // this.showGoogleSignIn.emit(false);
            }
        }, err => {
            this.showsendOtpForm = true;
            // this.showGoogleSignIn.emit(true)
        });
    }
    /**
     * @return {?}
     */
    verifyOtp() {
        /** @type {?} */
        let otp = this.verifyOtpForm.get('otp').value ? this.verifyOtpForm.get('otp').value : '';
        this.loginService.getMobileToken(otp, this.number).subscribe((data) => {
            this.onSignInResponse.emit({ code: StatusCode.Success, data });
        }, (err) => {
            this.onSignInResponse.emit({ code: StatusCode.Failure, data: err });
        });
    }
    /**
     * @param {?} value
     * @return {?}
     */
    onOtpChange(value) {
        if (value.length === 6) {
            this.verifyOtpForm.get('otp').setValue(value);
        }
        else {
            this.verifyOtpForm.get('otp').setValue('');
        }
        this.verifyOtpForm.get('otp').updateValueAndValidity();
    }
}
MobieLoginComponent.ɵfac = function MobieLoginComponent_Factory(t) { return new (t || MobieLoginComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.FormBuilder), ɵngcc0.ɵɵdirectiveInject(GoogleLoginService)); };
MobieLoginComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: MobieLoginComponent, selectors: [["mobie-login"]], inputs: { showsendOtpForm: "showsendOtpForm" }, outputs: { onSignInResponse: "onSignInResponse", showGoogleSignIn: "showGoogleSignIn" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], decls: 3, vars: 2, consts: [[1, "form-group"], [3, "formGroup", 4, "ngIf"], [3, "formGroup"], ["appearance", "outline"], ["matInput", "", "placeholder", "Enter mobile number", "formControlName", "number", "required", "", "autocomplete", "off", "numberDirective", "", "maxlength", "10"], ["matPrefix", ""], [1, "button-container"], ["type", "button", 1, "cstm-button", "active", 3, "disabled", "click"], [1, "btn-text"], [1, "sign-in-text"], [1, "otp-row"], [3, "config", "onInputChange"], [1, "anchor-div"], [1, "anchor-text"], [1, "resendText", 3, "click"]], template: function MobieLoginComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵtemplate(1, MobieLoginComponent_form_1_Template, 10, 2, "form", 1);
        ɵngcc0.ɵɵtemplate(2, MobieLoginComponent_form_2_Template, 14, 5, "form", 1);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showsendOtpForm);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.showsendOtpForm);
    } }, directives: [ɵngcc2.NgIf, ɵngcc1.ɵangular_packages_forms_forms_y, ɵngcc1.NgControlStatusGroup, ɵngcc1.FormGroupDirective, ɵngcc3.MatFormField, ɵngcc4.MatInput, ɵngcc1.DefaultValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.FormControlName, ɵngcc1.RequiredValidator, ɵngcc5.NumberDirective, ɵngcc1.MaxLengthValidator, ɵngcc3.MatPrefix, ɵngcc6.NgOtpInputComponent], styles: [".form-group[_ngcontent-%COMP%]{text-align:center;font-size:12px}.form-control[_ngcontent-%COMP%]{height:40px;border-radius:2px;box-shadow:none}.form-control[_ngcontent-%COMP%]:focus{border-color:#eee}.title[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.anchor-div[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}.resendText[_ngcontent-%COMP%]{color:#f47c21}.anchor-text[_ngcontent-%COMP%]{cursor:pointer;color:#000}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.cstm-button[_ngcontent-%COMP%]{background:0 0;border:1px solid #f47c21;border-radius:5px;text-align:center;width:100%;padding:8px 10px;display:inline-block;line-height:20px;margin-left:0!important}.btn-text[_ngcontent-%COMP%]{text-decoration:none;color:#f47c21;font-weight:700;font-size:14px}.cstm-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed!important}.cstm-button.active[_ngcontent-%COMP%]{cursor:pointer;background:#f47c21}.cstm-button.active[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{color:#fff}.cstm-button[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f47c21}.cstm-button[_ngcontent-%COMP%]:hover   .btn-text[_ngcontent-%COMP%]{color:#fff}.cstm-button[_ngcontent-%COMP%]:focus{outline:0}.phone-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:baseline}.otp-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;width:100%;margin:10px auto 25px}  .mat-form-field-flex{border:0!important}  .mat-form-field-infix{padding:8px 16px}  .mat-form-field-infix:focus{outline:#f47c21 solid 2px}"] });
/** @nocollapse */
MobieLoginComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: GoogleLoginService }
];
MobieLoginComponent.propDecorators = {
    onSignInResponse: [{ type: Output }],
    showGoogleSignIn: [{ type: Output }],
    showsendOtpForm: [{ type: Input }]
};
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(MobieLoginComponent, [{
        type: Component,
        args: [{
                selector: 'mobie-login',
                template: "<div class=\"form-group\">\n  <form *ngIf=\"showsendOtpForm\"  [formGroup]=\"sendOtpForm\">\n    <div>\n     \n      <mat-form-field appearance=\"outline\">\n        <input matInput placeholder=\"Enter mobile number\" formControlName=\"number\"  required autocomplete=\"off\" numberDirective maxlength=\"10\">\n        <span matPrefix>+91&nbsp;</span>\n      </mat-form-field>\n      <div class=\"button-container\">\n        <button class=\"cstm-button active\" type=\"button\" (click)=\"sendOtp(true)\" [disabled]=\"!sendOtpForm.valid\"><a class=\"btn-text\">Continue</a>\n        </button>\n      </div>\n    </div>\n  </form>\n  <form  *ngIf=\"!showsendOtpForm\" [formGroup]=\"verifyOtpForm\">\n    <div class=\"sign-in-text\">Please enter the OTP sent to {{number}}</div>\n    <div class=\"otp-row\">\n      <ng-otp-input  (onInputChange)=\"onOtpChange($event)\"  [config]=\"{length:6,allowNumbersOnly:true,inputClass:'otpInput',containerClass:'otp-wrapper'}\"></ng-otp-input>\n    </div>\n    <div class=\"button-container\">\n      <button class=\"cstm-button active\" type=\"button\" (click)=\"verifyOtp()\" [disabled]=\"!verifyOtpForm.valid\"><a class=\"btn-text\">Verify</a>\n      </button>\n    </div>\n    <div class=\"anchor-div\"><a class=\"anchor-text\" >Did not recieve OTP? <span class=\"resendText\" (click)=\"sendOtp(false)\">Resend OTP</span></a></div>\n\n  </form>\n</div>\n",
                styles: [".form-group{text-align:center;font-size:12px}.form-control{height:40px;border-radius:2px;box-shadow:none}.form-control:focus{border-color:#eee}.title{font-weight:600;font-size:16px}.anchor-div{margin-top:10px;font-size:14px}.resendText{color:#f47c21}.anchor-text{cursor:pointer;color:#000}.button-container{display:flex;justify-content:center}.cstm-button{background:0 0;border:1px solid #f47c21;border-radius:5px;text-align:center;width:100%;padding:8px 10px;display:inline-block;line-height:20px;margin-left:0!important}.btn-text{text-decoration:none;color:#f47c21;font-weight:700;font-size:14px}.cstm-button:disabled{cursor:not-allowed!important}.cstm-button.active{cursor:pointer;background:#f47c21}.cstm-button.active .btn-text{color:#fff}.cstm-button:hover{cursor:pointer;background:#f47c21}.cstm-button:hover .btn-text{color:#fff}.cstm-button:focus{outline:0}.phone-wrapper{display:flex;justify-content:space-around;align-items:baseline}.otp-row{display:flex;flex-direction:row;justify-content:center;width:100%;margin:10px auto 25px}::ng-deep .mat-form-field-flex{border:0!important}::ng-deep .mat-form-field-infix{padding:8px 16px}::ng-deep .mat-form-field-infix:focus{outline:#f47c21 solid 2px}"]
            }]
    }], function () { return [{ type: ɵngcc1.FormBuilder }, { type: GoogleLoginService }]; }, { onSignInResponse: [{
            type: Output
        }], showGoogleSignIn: [{
            type: Output
        }], showsendOtpForm: [{
            type: Input
        }] }); })();
if (false) {
    /** @type {?} */
    MobieLoginComponent.prototype.onSignInResponse;
    /** @type {?} */
    MobieLoginComponent.prototype.showGoogleSignIn;
    /** @type {?} */
    MobieLoginComponent.prototype.showsendOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.sendOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.verifyOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.showVerifyOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.number;
    /** @type {?} */
    MobieLoginComponent.prototype.fb;
    /** @type {?} */
    MobieLoginComponent.prototype.loginService;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWUtbG9naW4uY29tcG9uZW50LmpzIiwic291cmNlcyI6WyJuZzovY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi9saWIvbW9iaWUtbG9naW4vbW9iaWUtbG9naW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFlBQVksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUM5RixPQUFPLEVBQWEsV0FBVyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNqRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUMxRSxPQUFPLEVBQXVCLFVBQVUsRUFBRSxNQUFNLFdBQVcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzVELE1BQU07QUFBNkI7QUFBUTtBQUNoQztBQUErQjtBQUFRLElBU2hELFlBQW9CLEVBQWUsRUFBVSxZQUFxQztBQUNwRixRQURzQixPQUFFLEdBQUYsRUFBRSxDQUFhO0FBQUMsUUFBUyxpQkFBWSxHQUFaLFlBQVksQ0FBeUI7QUFBQyxnQ0FUbkIsSUFBSSxZQUFZLEVBQXVCO0FBQ3pHLGdDQUFrRCxJQUFJLFlBQVksRUFBTztBQUN6RSwrQkFBc0MsSUFBSTtBQUMxQyxRQU9JLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztBQUNoQyxZQUFNLE1BQU0sRUFBRSxJQUFJLFdBQVcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQUUsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzVHLFNBQUssQ0FBQyxDQUFDO0FBQ1AsUUFDSSxJQUFJLENBQUMsYUFB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QSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFwRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFSQSxBQUFBLEFBQ0EsQUFBQSxBQVNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgSW5wdXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wsIFZhbGlkYXRvcnMsIEZvcm1CdWlsZGVyIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgR29vZ2xlTG9naW5TZXJ2aWNlIH0gZnJvbSAnLi4vY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi5zZXJ2aWNlJztcbmltcG9ydCB7IEdvb2dsZUxvZ2luUmVzcG9uc2UsIFN0YXR1c0NvZGUgfSBmcm9tICcuLi9tb2RlbHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdtb2JpZS1sb2dpbicsXG4gIHRlbXBsYXRlVXJsOiAnLi9tb2JpZS1sb2dpbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL21vYmllLWxvZ2luLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBNb2JpZUxvZ2luQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQE91dHB1dCgpIG9uU2lnbkluUmVzcG9uc2U6IEV2ZW50RW1pdHRlcjxHb29nbGVMb2dpblJlc3BvbnNlPiA9IG5ldyBFdmVudEVtaXR0ZXI8R29vZ2xlTG9naW5SZXNwb25zZT4oKTtcbiAgQE91dHB1dCgpIHNob3dHb29nbGVTaWduSW46IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBJbnB1dCgpIHNob3dzZW5kT3RwRm9ybTogYm9vbGVhbiA9IHRydWU7XG5cbiAgc2VuZE90cEZvcm06IEZvcm1Hcm91cDtcbiAgdmVyaWZ5T3RwRm9ybTogRm9ybUdyb3VwO1xuICBzaG93VmVyaWZ5T3RwRm9ybTogYm9vbGVhbjtcbiAgbnVtYmVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBmYjogRm9ybUJ1aWxkZXIsIHByaXZhdGUgbG9naW5TZXJ2aWNlOiBHb29nbGVMb2dpblNlcnZpY2U8YW55Pikge1xuICAgIHRoaXMuc2VuZE90cEZvcm0gPSBmYi5ncm91cCh7XG4gICAgICBudW1iZXI6IG5ldyBGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMubWluTGVuZ3RoKDEwKSwgVmFsaWRhdG9ycy5tYXhMZW5ndGgoMTApXSlcbiAgICB9KTtcblxuICAgIHRoaXMudmVyaWZ5T3RwRm9ybSA9IGZiLmdyb3VwKHtcbiAgICAgIG90cDogbmV3IEZvcm1Db250cm9sKCcnLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5taW5MZW5ndGgoNiksIFZhbGlkYXRvcnMubWF4TGVuZ3RoKDYpXSlcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzWydzaG93c2VuZE90cEZvcm0nXSkge1xuICAgICAgdGhpcy5zZW5kT3RwRm9ybS5yZXNldCgpO1xuICAgICAgdGhpcy52ZXJpZnlPdHBGb3JtLnJlc2V0KCk7XG4gICAgfVxuICB9XG5cblxuICBzZW5kT3RwKGhpZGVTZW5kT3RwRm9ybSkge1xuICAgIGxldCBzZWxlY3RlZFBob25lTm8gPSB0aGlzLnNlbmRPdHBGb3JtLmdldCgnbnVtYmVyJykudmFsdWU7XG5cbiAgICB0aGlzLm51bWJlciA9IHNlbGVjdGVkUGhvbmVObyA/IHNlbGVjdGVkUGhvbmVObyA6IHRoaXMubnVtYmVyO1xuICAgIHRoaXMubG9naW5TZXJ2aWNlLnNlbmRPdHAodGhpcy5udW1iZXIpLnN1YnNjcmliZSgocmVzKSA9PiB7XG4gICAgICBpZiAoaGlkZVNlbmRPdHBGb3JtKSB7XG4gICAgICAgIHRoaXMuc2hvd3NlbmRPdHBGb3JtID0gZmFsc2U7XG4gICAgICAgIC8vIHRoaXMuc2hvd0dvb2dsZVNpZ25Jbi5lbWl0KGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCBlcnIgPT4ge1xuICAgICAgdGhpcy5zaG93c2VuZE90cEZvcm0gPSB0cnVlO1xuICAgICAgLy8gdGhpcy5zaG93R29vZ2xlU2lnbkluLmVtaXQodHJ1ZSlcbiAgICB9KVxuICB9XG5cbiAgdmVyaWZ5T3RwKCkge1xuICAgIGxldCBvdHAgPSB0aGlzLnZlcmlmeU90cEZvcm0uZ2V0KCdvdHAnKS52YWx1ZT90aGlzLnZlcmlmeU90cEZvcm0uZ2V0KCdvdHAnKS52YWx1ZTonJztcbiAgICB0aGlzLmxvZ2luU2VydmljZS5nZXRNb2JpbGVUb2tlbihvdHAsIHRoaXMubnVtYmVyKS5zdWJzY3JpYmUoKGRhdGEpID0+IHtcbiAgICAgIHRoaXMub25TaWduSW5SZXNwb25zZS5lbWl0KHsgY29kZTogU3RhdHVzQ29kZS5TdWNjZXNzLCBkYXRhIH0pO1xuICAgIH0sIChlcnIpID0+IHtcbiAgICAgIHRoaXMub25TaWduSW5SZXNwb25zZS5lbWl0KHsgY29kZTogU3RhdHVzQ29kZS5GYWlsdXJlLCBkYXRhOiBlcnIgfSk7XG4gICAgfSk7XG4gIH1cblxuICBvbk90cENoYW5nZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDYpIHtcbiAgICAgIHRoaXMudmVyaWZ5T3RwRm9ybS5nZXQoJ290cCcpLnNldFZhbHVlKHZhbHVlKVxuICAgIH1lbHNle1xuICAgICAgdGhpcy52ZXJpZnlPdHBGb3JtLmdldCgnb3RwJykuc2V0VmFsdWUoJycpXG4gICAgfVxuICAgIHRoaXMudmVyaWZ5T3RwRm9ybS5nZXQoJ290cCcpLnVwZGF0ZVZhbHVlQW5kVmFsaWRpdHkoKTtcblxuICB9XG59XG4iXX0=