/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Output, Input } from '@angular/core';
import { FormControl, Validators, FormBuilder } from '@angular/forms';
import { GoogleLoginService } from '../chalo-google-hybrid-login.service';
import { StatusCode } from '../models';
var MobieLoginComponent = /** @class */ (function () {
    function MobieLoginComponent(fb, loginService) {
        this.fb = fb;
        this.loginService = loginService;
        this.onSignInResponse = new EventEmitter();
        this.showGoogleSignIn = new EventEmitter();
        this.showsendOtpForm = true;
        this.sendOtpForm = fb.group({
            number: new FormControl('', [Validators.required, Validators.minLength(10), Validators.maxLength(10)])
        });
        this.verifyOtpForm = fb.group({
            otp: new FormControl('', [Validators.required, Validators.minLength(6), Validators.maxLength(6)])
        });
    }
    /**
     * @return {?}
     */
    MobieLoginComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    MobieLoginComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes['showsendOtpForm']) {
            this.sendOtpForm.reset();
            this.verifyOtpForm.reset();
        }
    };
    /**
     * @param {?} hideSendOtpForm
     * @return {?}
     */
    MobieLoginComponent.prototype.sendOtp = /**
     * @param {?} hideSendOtpForm
     * @return {?}
     */
    function (hideSendOtpForm) {
        var _this = this;
        /** @type {?} */
        var selectedPhoneNo = this.sendOtpForm.get('number').value;
        this.number = selectedPhoneNo ? selectedPhoneNo : this.number;
        this.loginService.sendOtp(this.number).subscribe(function (res) {
            if (hideSendOtpForm) {
                _this.showsendOtpForm = false;
                // this.showGoogleSignIn.emit(false);
            }
        }, function (err) {
            _this.showsendOtpForm = true;
            // this.showGoogleSignIn.emit(true)
        });
    };
    /**
     * @return {?}
     */
    MobieLoginComponent.prototype.verifyOtp = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var otp = this.verifyOtpForm.get('otp').value ? this.verifyOtpForm.get('otp').value : '';
        this.loginService.getMobileToken(otp, this.number).subscribe(function (data) {
            _this.onSignInResponse.emit({ code: StatusCode.Success, data: data });
        }, function (err) {
            _this.onSignInResponse.emit({ code: StatusCode.Failure, data: err });
        });
    };
    /**
     * @param {?} value
     * @return {?}
     */
    MobieLoginComponent.prototype.onOtpChange = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (value.length === 6) {
            this.verifyOtpForm.get('otp').setValue(value);
        }
        else {
            this.verifyOtpForm.get('otp').setValue('');
        }
        this.verifyOtpForm.get('otp').updateValueAndValidity();
    };
    MobieLoginComponent.decorators = [
        { type: Component, args: [{
                    selector: 'mobie-login',
                    template: "<div class=\"form-group\">\n  <form *ngIf=\"showsendOtpForm\"  [formGroup]=\"sendOtpForm\">\n    <div>\n     \n      <mat-form-field appearance=\"outline\">\n        <input matInput placeholder=\"Enter mobile number\" formControlName=\"number\"  required autocomplete=\"off\" numberDirective maxlength=\"10\">\n        <span matPrefix>+91&nbsp;</span>\n      </mat-form-field>\n      <div class=\"button-container\">\n        <button class=\"cstm-button active\" type=\"button\" (click)=\"sendOtp(true)\" [disabled]=\"!sendOtpForm.valid\"><a class=\"btn-text\">Continue</a>\n        </button>\n      </div>\n    </div>\n  </form>\n  <form  *ngIf=\"!showsendOtpForm\" [formGroup]=\"verifyOtpForm\">\n    <div class=\"sign-in-text\">Please enter the OTP sent to {{number}}</div>\n    <div class=\"otp-row\">\n      <ng-otp-input  (onInputChange)=\"onOtpChange($event)\"  [config]=\"{length:6,allowNumbersOnly:true,inputClass:'otpInput',containerClass:'otp-wrapper'}\"></ng-otp-input>\n    </div>\n    <div class=\"button-container\">\n      <button class=\"cstm-button active\" type=\"button\" (click)=\"verifyOtp()\" [disabled]=\"!verifyOtpForm.valid\"><a class=\"btn-text\">Verify</a>\n      </button>\n    </div>\n    <div class=\"anchor-div\"><a class=\"anchor-text\" >Did not recieve OTP? <span class=\"resendText\" (click)=\"sendOtp(false)\">Resend OTP</span></a></div>\n\n  </form>\n</div>\n",
                    styles: [".form-group{text-align:center;font-size:12px}.form-control{height:40px;border-radius:2px;box-shadow:none}.form-control:focus{border-color:#eee}.title{font-weight:600;font-size:16px}.anchor-div{margin-top:10px;font-size:14px}.resendText{color:#f47c21}.anchor-text{cursor:pointer;color:#000}.button-container{display:flex;justify-content:center}.cstm-button{background:0 0;border:1px solid #f47c21;border-radius:5px;text-align:center;width:100%;padding:8px 10px;display:inline-block;line-height:20px;margin-left:0!important}.btn-text{text-decoration:none;color:#f47c21;font-weight:700;font-size:14px}.cstm-button:disabled{cursor:not-allowed!important}.cstm-button.active{cursor:pointer;background:#f47c21}.cstm-button.active .btn-text{color:#fff}.cstm-button:hover{cursor:pointer;background:#f47c21}.cstm-button:hover .btn-text{color:#fff}.cstm-button:focus{outline:0}.phone-wrapper{display:flex;justify-content:space-around;align-items:baseline}.otp-row{display:flex;flex-direction:row;justify-content:center;width:100%;margin:10px auto 25px}::ng-deep .mat-form-field-flex{border:0!important}::ng-deep .mat-form-field-infix{padding:8px 16px}::ng-deep .mat-form-field-infix:focus{outline:#f47c21 solid 2px}"]
                }] }
    ];
    /** @nocollapse */
    MobieLoginComponent.ctorParameters = function () { return [
        { type: FormBuilder },
        { type: GoogleLoginService }
    ]; };
    MobieLoginComponent.propDecorators = {
        onSignInResponse: [{ type: Output }],
        showGoogleSignIn: [{ type: Output }],
        showsendOtpForm: [{ type: Input }]
    };
    return MobieLoginComponent;
}());
export { MobieLoginComponent };
if (false) {
    /** @type {?} */
    MobieLoginComponent.prototype.onSignInResponse;
    /** @type {?} */
    MobieLoginComponent.prototype.showGoogleSignIn;
    /** @type {?} */
    MobieLoginComponent.prototype.showsendOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.sendOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.verifyOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.showVerifyOtpForm;
    /** @type {?} */
    MobieLoginComponent.prototype.number;
    /** @type {?} */
    MobieLoginComponent.prototype.fb;
    /** @type {?} */
    MobieLoginComponent.prototype.loginService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9iaWUtbG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi8iLCJzb3VyY2VzIjpbImxpYi9tb2JpZS1sb2dpbi9tb2JpZS1sb2dpbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsWUFBWSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQzlGLE9BQU8sRUFBYSxXQUFXLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pGLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQzFFLE9BQU8sRUFBdUIsVUFBVSxFQUFFLE1BQU0sV0FBVyxDQUFDOztJQWlCMUQsNkJBQW9CLEVBQWUsRUFBVSxZQUFxQztRQUE5RCxPQUFFLEdBQUYsRUFBRSxDQUFhO1FBQVUsaUJBQVksR0FBWixZQUFZLENBQXlCO2dDQVRsQixJQUFJLFlBQVksRUFBdUI7Z0NBQ3ZELElBQUksWUFBWSxFQUFPOytCQUNuQyxJQUFJO1FBUXRDLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztZQUMxQixNQUFNLEVBQUUsSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUN2RyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsYUFBYSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7WUFDNUIsR0FBRyxFQUFFLElBQUksV0FBVyxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsU0FB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IElucHV0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEZvcm1Db250cm9sLCBWYWxpZGF0b3JzLCBGb3JtQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEdvb2dsZUxvZ2luU2VydmljZSB9IGZyb20gJy4uL2NoYWxvLWdvb2dsZS1oeWJyaWQtbG9naW4uc2VydmljZSc7XG5pbXBvcnQgeyBHb29nbGVMb2dpblJlc3BvbnNlLCBTdGF0dXNDb2RlIH0gZnJvbSAnLi4vbW9kZWxzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbW9iaWUtbG9naW4nLFxuICB0ZW1wbGF0ZVVybDogJy4vbW9iaWUtbG9naW4uY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9tb2JpZS1sb2dpbi5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTW9iaWVMb2dpbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBPdXRwdXQoKSBvblNpZ25JblJlc3BvbnNlOiBFdmVudEVtaXR0ZXI8R29vZ2xlTG9naW5SZXNwb25zZT4gPSBuZXcgRXZlbnRFbWl0dGVyPEdvb2dsZUxvZ2luUmVzcG9uc2U+KCk7XG4gIEBPdXRwdXQoKSBzaG93R29vZ2xlU2lnbkluOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBASW5wdXQoKSBzaG93c2VuZE90cEZvcm06IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHNlbmRPdHBGb3JtOiBGb3JtR3JvdXA7XG4gIHZlcmlmeU90cEZvcm06IEZvcm1Hcm91cDtcbiAgc2hvd1ZlcmlmeU90cEZvcm06IGJvb2xlYW47XG4gIG51bWJlcjogYW55O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLCBwcml2YXRlIGxvZ2luU2VydmljZTogR29vZ2xlTG9naW5TZXJ2aWNlPGFueT4pIHtcbiAgICB0aGlzLnNlbmRPdHBGb3JtID0gZmIuZ3JvdXAoe1xuICAgICAgbnVtYmVyOiBuZXcgRm9ybUNvbnRyb2woJycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLm1pbkxlbmd0aCgxMCksIFZhbGlkYXRvcnMubWF4TGVuZ3RoKDEwKV0pXG4gICAgfSk7XG5cbiAgICB0aGlzLnZlcmlmeU90cEZvcm0gPSBmYi5ncm91cCh7XG4gICAgICBvdHA6IG5ldyBGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMubWluTGVuZ3RoKDYpLCBWYWxpZGF0b3JzLm1heExlbmd0aCg2KV0pXG4gICAgfSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlc1snc2hvd3NlbmRPdHBGb3JtJ10pIHtcbiAgICAgIHRoaXMuc2VuZE90cEZvcm0ucmVzZXQoKTtcbiAgICAgIHRoaXMudmVyaWZ5T3RwRm9ybS5yZXNldCgpO1xuICAgIH1cbiAgfVxuXG5cbiAgc2VuZE90cChoaWRlU2VuZE90cEZvcm0pIHtcbiAgICBsZXQgc2VsZWN0ZWRQaG9uZU5vID0gdGhpcy5zZW5kT3RwRm9ybS5nZXQoJ251bWJlcicpLnZhbHVlO1xuXG4gICAgdGhpcy5udW1iZXIgPSBzZWxlY3RlZFBob25lTm8gPyBzZWxlY3RlZFBob25lTm8gOiB0aGlzLm51bWJlcjtcbiAgICB0aGlzLmxvZ2luU2VydmljZS5zZW5kT3RwKHRoaXMubnVtYmVyKS5zdWJzY3JpYmUoKHJlcykgPT4ge1xuICAgICAgaWYgKGhpZGVTZW5kT3RwRm9ybSkge1xuICAgICAgICB0aGlzLnNob3dzZW5kT3RwRm9ybSA9IGZhbHNlO1xuICAgICAgICAvLyB0aGlzLnNob3dHb29nbGVTaWduSW4uZW1pdChmYWxzZSk7XG4gICAgICB9XG4gICAgfSwgZXJyID0+IHtcbiAgICAgIHRoaXMuc2hvd3NlbmRPdHBGb3JtID0gdHJ1ZTtcbiAgICAgIC8vIHRoaXMuc2hvd0dvb2dsZVNpZ25Jbi5lbWl0KHRydWUpXG4gICAgfSlcbiAgfVxuXG4gIHZlcmlmeU90cCgpIHtcbiAgICBsZXQgb3RwID0gdGhpcy52ZXJpZnlPdHBGb3JtLmdldCgnb3RwJykudmFsdWU/dGhpcy52ZXJpZnlPdHBGb3JtLmdldCgnb3RwJykudmFsdWU6Jyc7XG4gICAgdGhpcy5sb2dpblNlcnZpY2UuZ2V0TW9iaWxlVG9rZW4ob3RwLCB0aGlzLm51bWJlcikuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICB0aGlzLm9uU2lnbkluUmVzcG9uc2UuZW1pdCh7IGNvZGU6IFN0YXR1c0NvZGUuU3VjY2VzcywgZGF0YSB9KTtcbiAgICB9LCAoZXJyKSA9PiB7XG4gICAgICB0aGlzLm9uU2lnbkluUmVzcG9uc2UuZW1pdCh7IGNvZGU6IFN0YXR1c0NvZGUuRmFpbHVyZSwgZGF0YTogZXJyIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgb25PdHBDaGFuZ2UodmFsdWUpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoID09PSA2KSB7XG4gICAgICB0aGlzLnZlcmlmeU90cEZvcm0uZ2V0KCdvdHAnKS5zZXRWYWx1ZSh2YWx1ZSlcbiAgICB9ZWxzZXtcbiAgICAgIHRoaXMudmVyaWZ5T3RwRm9ybS5nZXQoJ290cCcpLnNldFZhbHVlKCcnKVxuICAgIH1cbiAgICB0aGlzLnZlcmlmeU90cEZvcm0uZ2V0KCdvdHAnKS51cGRhdGVWYWx1ZUFuZFZhbGlkaXR5KCk7XG5cbiAgfVxufVxuIl19