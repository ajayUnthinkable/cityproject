/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Inject, Injectable } from '@angular/core';
import { GOOGLE_LOGIN_CONFIG } from './models/chalo-google-login.config';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { ScriptLoadService } from './script-load.service';
import { Observable, Subject } from 'rxjs';
import { CookieService } from 'ngx-cookie-service';
import CryptoJS from 'crypto-js';
/**
 * @template T
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common/http';
import * as ɵngcc2 from 'ngx-cookie-service';
export class GoogleLoginService {
    /**
     * @param {?} config
     * @param {?} httpHandler
     * @param {?} scriptService
     * @param {?} cookieService
     */
    constructor(config, httpHandler, scriptService, cookieService) {
        this.config = config;
        this.httpHandler = httpHandler;
        this.scriptService = scriptService;
        this.cookieService = cookieService;
        this.subject = new Subject();
        this.loginResponsesubject = new Subject();
        this.scriptService.loadScript('https://apis.google.com/js/client:platform.js').subscribe((data) => {
            try {
                gapi.load('client', () => {
                    this.auth2 = gapi.auth2.init({
                        client_id: this.config.auth.google.client_id,
                        scope: 'profile'
                    });
                });
            }
            catch (err) {
                console.log('error in initializing auth');
            }
        }, err => {
            console.log('erro', err);
        });
    }
    /**
     * @return {?}
     */
    getGoogleLogin() {
        return this.authObservable = new Observable((observer) => {
            if (!this.auth2) {
                observer.error('Auth instance is not defined');
            }
            else {
                this.auth2.grantOfflineAccess().then((res) => {
                    this.sendAuthorization(res.code).subscribe((data) => {
                        this.getUserToken(data).subscribe((d) => {
                            this.setCookieData(data);
                            observer.next(d);
                            observer.complete();
                        }, (err) => {
                            observer.error(err);
                        });
                    }, (err) => {
                        observer.error(err);
                    });
                });
            }
        });
    }
    /**
     * @return {?}
     */
    getUserDetails() {
        /** @type {?} */
        let user = this.getUserCookieValue();
        /** @type {?} */
        var url = this.config.user.authenticateUserUrl;
        url = `${url}?userId=${encodeURIComponent(user)}`;
        return this.httpHandler.get(url);
    }
    /**
     * @return {?}
     */
    getToken() {
        return this.userObservable = new Observable((observer) => {
            this.getUserDetails().subscribe((userDetails) => {
                this.getUserToken(userDetails).subscribe((d) => {
                    observer.next(d);
                    observer.complete();
                }, (err) => {
                    observer.error(err);
                });
            }, (err) => {
                observer.error(err);
            });
        });
    }
    /**
     * @param {?} googleResponse
     * @return {?}
     */
    setGoogleLoginResponse(googleResponse) {
        this.loginResponsesubject.next(googleResponse);
    }
    /**
     * @return {?}
     */
    getGoogleLoginResponse() {
        return this.loginResponsesubject.asObservable();
    }
    /**
     * @return {?}
     */
    isUserAuthenticated() {
        /** @type {?} */
        let userCookie = this.getUserCookieValue();
        if (userCookie) {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    getUserCookieValue() {
        return this.cookieService.get(this.config.user.userCookie);
    }
    /**
     * @param {?} token
     * @return {?}
     */
    sendAuthorization(token) {
        /** @type {?} */
        const url = this.config.authCodeUrl;
        /** @type {?} */
        const headerToken = {
            key: 'auth-code',
            value: token
        };
        /** @type {?} */
        const headers = new HttpHeaders({ 'auth-code': headerToken.value });
        /** @type {?} */
        const options = { headers };
        return this.httpHandler.post(url, null, options);
    }
    /**
     * @param {?} userCredential
     * @return {?}
     */
    getUserToken(userCredential) {
        /** @type {?} */
        const data = {
            username: userCredential.username,
            password: userCredential.password,
            grant_type: 'password'
        };
        return this.getTokenFromServer(data);
    }
    /**
     * @param {?} refreshToken
     * @return {?}
     */
    getUserTokenFromRefreshToken(refreshToken) {
        /** @type {?} */
        const data = {
            refresh_token: refreshToken,
            grant_type: 'refresh_token'
        };
        return this.getTokenFromServer(data);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    getTokenFromServer(data) {
        /** @type {?} */
        const url = this.config.userTokenServerUrl;
        /** @type {?} */
        const urlEncodedData = this.getEncodedData(data);
        /** @type {?} */
        const headerToken = {
            key: 'Authorization',
            value: 'Basic ' + btoa(`${this.config.auth.server.client_id}:${this.config.auth.server.client_secret}`)
        };
        /** @type {?} */
        const headers = new HttpHeaders({ Authorization: headerToken.value }).set('Content-Type', 'application/x-www-form-urlencoded');
        /** @type {?} */
        const options = { headers };
        return this.httpHandler.post(url, urlEncodedData, options);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    getEncodedData(data) {
        /** @type {?} */
        const urlEncodedDataPairs = [];
        for (const name in data) {
            if (data.hasOwnProperty(name)) {
                urlEncodedDataPairs.push(encodeURIComponent(name) + '=' + encodeURIComponent(data[name]));
            }
        }
        /** @type {?} */
        const urlEncodedData = urlEncodedDataPairs.join('&').replace(/%20/g, '+');
        return urlEncodedData;
    }
    /**
     * @return {?}
     */
    logoutUser() {
        /** @type {?} */
        let userCookie = this.getUserCookieValue();
        /** @type {?} */
        let url = `${this.config.logout.logoutUrl}`;
        if (userCookie) {
            this.cookieService.delete(this.config.user.userCookie, '/', '.chalo.com');
            url = `${url}?userId=${userCookie}`;
        }
        return this.httpHandler.post(url, {}, { responseType: 'text' });
    }
    /**
     * @return {?}
     */
    updateUserState() {
        /** @type {?} */
        let userCookie = this.getUserCookieValue();
        // this.cookieService.set(this.config.user.loginStateCookie, this.encryptCookie('loggedOut'), 7, '/', null, false, 'Lax')
        this.cookieService.set(this.config.user.loginStateCookie, this.encryptCookie('loggedOut'), 7, '/', '.chalo.com', false, 'Lax');
        if (userCookie) {
            // this.cookieService.delete(this.config.user.userCookie, '/');
            this.cookieService.delete(this.config.user.userCookie, '/', '.chalo.com');
        }
    }
    /**
     * @param {?} msg
     * @return {?}
     */
    sendLogoutMessage(msg) {
        this.subject.next({ message: msg });
    }
    /**
     * @return {?}
     */
    getLogoutMessage() {
        return this.subject.asObservable();
    }
    /**
     * @param {?} stringToEncrypt
     * @return {?}
     */
    encryptCookie(stringToEncrypt) {
        /** @type {?} */
        var key = CryptoJS.enc.Utf8.parse('web_chalo_appkey');
        /** @type {?} */
        var encryptedString = CryptoJS.AES.encrypt(stringToEncrypt, key, {
            mode: CryptoJS.mode.ECB,
            padding: CryptoJS.pad.ZeroPadding
        });
        return encryptedString.toString();
    }
    /**
     * @param {?} encryptedString
     * @return {?}
     */
    decryptString(encryptedString) {
        /** @type {?} */
        var key = CryptoJS.enc.Utf8.parse('web_chalo_appkey');
        /** @type {?} */
        var decrypted = CryptoJS.AES.decrypt(encryptedString, key, {
            mode: CryptoJS.mode.ECB,
            padding: CryptoJS.pad.ZeroPadding
        });
        return decrypted.toString(CryptoJS.enc.Utf8);
    }
    /**
     * @return {?}
     */
    getUserCookie() {
        /** @type {?} */
        let encryptedCookie = this.getUserCookieValue();
        /** @type {?} */
        let decryptedUserCookie;
        if (encryptedCookie)
            decryptedUserCookie = this.decryptString(encryptedCookie);
        return decryptedUserCookie;
    }
    /**
     * @param {?} number
     * @return {?}
     */
    sendOtp(number) {
        /** @type {?} */
        let url = `${this.config.sendOtpUrl}`;
        return this.httpHandler.post(url, { "number": number });
    }
    /**
     * @param {?} body
     * @return {?}
     */
    validateUser(body) {
        /** @type {?} */
        let url = `${this.config.validateUserUrl}`;
        return this.httpHandler.post(url, body);
    }
    /**
     * @param {?} otp
     * @param {?} number
     * @return {?}
     */
    validateOtp(otp, number) {
        /** @type {?} */
        let url = `${this.config.validateOtpUrl}`;
        /** @type {?} */
        let params = this.getURLSearchParams()
            .set("otp", otp)
            .set("mobile", number);
        return this.httpHandler.get(url, { params });
    }
    /**
     * @param {?} otp
     * @param {?} number
     * @return {?}
     */
    getMobileToken(otp, number) {
        return this.userObservable = new Observable((observer) => {
            this.validateOtp(otp, number).subscribe((userDetails) => {
                this.getUserToken(userDetails).subscribe((d) => {
                    this.setCookieData(userDetails);
                    observer.next(d);
                    observer.complete();
                }, (err) => {
                    observer.error(err);
                });
            }, (err) => {
                observer.error(err);
            });
        });
    }
    /**
     * @return {?}
     */
    getURLSearchParams() {
        return new HttpParams();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    setCookieData(data) {
        if (data['userId']) {
            /** @type {?} */
            var encryptedString = this.encryptCookie(data['userId']);
            this.cookieService.set(this.config.user.userCookie, encryptedString, 7, '/', '.chalo.com', false, 'Lax');
            // this.cookieService.set(this.config.user.userCookie, encryptedString, 7, '/', null, false, 'Lax');
        }
        this.cookieService.set(this.config.user.loginStateCookie, this.encryptCookie('loggedIn'), 7, '/', '.chalo.com', false, 'Lax');
        // this.cookieService.set(this.config.user.loginStateCookie, this.encryptCookie('loggedIn'), 7, '/', null, false, 'Lax')
    }
}
GoogleLoginService.ɵfac = function GoogleLoginService_Factory(t) { return new (t || GoogleLoginService)(ɵngcc0.ɵɵinject(GOOGLE_LOGIN_CONFIG), ɵngcc0.ɵɵinject(ɵngcc1.HttpClient), ɵngcc0.ɵɵinject(ScriptLoadService), ɵngcc0.ɵɵinject(ɵngcc2.CookieService)); };
GoogleLoginService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: GoogleLoginService, factory: GoogleLoginService.ɵfac });
/** @nocollapse */
GoogleLoginService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [GOOGLE_LOGIN_CONFIG,] }] },
    { type: HttpClient },
    { type: ScriptLoadService },
    { type: CookieService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GoogleLoginService, [{
        type: Injectable
    }], function () { return [{ type: undefined, decorators: [{
                type: Inject,
                args: [GOOGLE_LOGIN_CONFIG]
            }] }, { type: ɵngcc1.HttpClient }, { type: ScriptLoadService }, { type: ɵngcc2.CookieService }]; }, null); })();
if (false) {
    /** @type {?} */
    GoogleLoginService.prototype.auth2;
    /** @type {?} */
    GoogleLoginService.prototype.authObservable;
    /** @type {?} */
    GoogleLoginService.prototype.userObservable;
    /** @type {?} */
    GoogleLoginService.prototype.subject;
    /** @type {?} */
    GoogleLoginService.prototype.loginResponsesubject;
    /** @type {?} */
    GoogleLoginService.prototype.config;
    /** @type {?} */
    GoogleLoginService.prototype.httpHandler;
    /** @type {?} */
    GoogleLoginService.prototype.scriptService;
    /** @type {?} */
    GoogleLoginService.prototype.cookieService;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi5zZXJ2aWNlLmpzIiwic291cmNlcyI6WyJuZzovY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi9saWIvY2hhbG8tZ29vZ2xlLWh5YnJpZC1sb2dpbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsbUJBQW1CLEVBQXFCLE1BQU0sb0NBQW9DLENBQUM7QUFDNUYsT0FBTyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDM0UsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDMUQsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDM0MsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBRW5ELE9BQU8sUUFBUSxNQUFNLFdBQVcsQ0FBQztBQUNqQztBQUNHO0FBQ0g7Ozs7QUFFQSxNQUFNO0FBQTRCO0FBQzdCO0FBQ2dCO0FBQ2I7QUFBZ0M7QUFDWDtBQUFRLElBSW5DLFlBQWlELE1BQXlCLEVBQVUsV0FBdUIsRUFBVSxhQUFnQyxFQUMzSTtBQUFpQixRQURzQixXQUFNLEdBQU4sTUFBTSxDQUFtQjtBQUFDLFFBQVMsZ0JBQVcsR0FBWCxXQUFXLENBQVk7QUFBQyxRQUFTLGtCQUFhLEdBQWIsYUFBYSxDQUFtQjtBQUFDLFFBQzVJLGtCQUFhLEdBQWIsYUFBYTtBQUFFLHVCQUxQLElBQUksT0FBTyxFQUFPO0FBQ3RDLG9DQUN5QixJQUFJLE9BQU8sRUFBdUI7QUFDM0QsUUFHSSxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQywrQ0FBK0MsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO0FBQ3RHLFlBQU0sSUFBSSxDQUFD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LEFBQUEsQUFLQSxBQUFBLEFBUUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQURBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBTEEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUlBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBRUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBR0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBM1BBLEFBQUEsQUFTQSxBQUFBLEFBQUEsQUFBQSxBQWxCQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEdPT0dMRV9MT0dJTl9DT05GSUcsIEdvb2dsZUxvZ2luQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvY2hhbG8tZ29vZ2xlLWxvZ2luLmNvbmZpZyc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycywgSHR0cFBhcmFtcyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IFNjcmlwdExvYWRTZXJ2aWNlIH0gZnJvbSAnLi9zY3JpcHQtbG9hZC5zZXJ2aWNlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvb2tpZVNlcnZpY2UgfSBmcm9tICduZ3gtY29va2llLXNlcnZpY2UnO1xuaW1wb3J0IHsgR29vZ2xlTG9naW5SZXNwb25zZSB9IGZyb20gJy4vbW9kZWxzJztcbmltcG9ydCBDcnlwdG9KUyBmcm9tICdjcnlwdG8tanMnO1xuXG5kZWNsYXJlIHZhciBnYXBpO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgR29vZ2xlTG9naW5TZXJ2aWNlPFQ+IHtcbiAgYXV0aDI7XG4gIGF1dGhPYnNlcnZhYmxlOiBPYnNlcnZhYmxlPGJvb2xlYW4gfCBUPjtcbiAgdXNlck9ic2VydmFibGU6IE9ic2VydmFibGU8Ym9vbGVhbiB8IFQ+O1xuICBwcml2YXRlIHN1YmplY3QgPSBuZXcgU3ViamVjdDxhbnk+KCk7XG5cbiAgbG9naW5SZXNwb25zZXN1YmplY3QgPSBuZXcgU3ViamVjdDxHb29nbGVMb2dpblJlc3BvbnNlPigpO1xuXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoR09PR0xFX0xPR0lOX0NPTkZJRykgcHJpdmF0ZSBjb25maWc6IEdvb2dsZUxvZ2luQ29uZmlnLCBwcml2YXRlIGh0dHBIYW5kbGVyOiBIdHRwQ2xpZW50LCBwcml2YXRlIHNjcmlwdFNlcnZpY2U6IFNjcmlwdExvYWRTZXJ2aWNlLFxuICAgIHByaXZhdGUgY29va2llU2VydmljZTogQ29va2llU2VydmljZSkge1xuICAgIHRoaXMuc2NyaXB0U2VydmljZS5sb2FkU2NyaXB0KCdodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9jbGllbnQ6cGxhdGZvcm0uanMnKS5zdWJzY3JpYmUoKGRhdGEpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGdhcGkubG9hZCgnY2xpZW50JywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYXV0aDIgPSBnYXBpLmF1dGgyLmluaXQoe1xuICAgICAgICAgICAgY2xpZW50X2lkOiB0aGlzLmNvbmZpZy5hdXRoLmdvb2dsZS5jbGllbnRfaWQsXG4gICAgICAgICAgICBzY29wZTogJ3Byb2ZpbGUnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBpbiBpbml0aWFsaXppbmcgYXV0aCcpO1xuICAgICAgfVxuICAgIH0sIGVyciA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnZXJybycsIGVycik7XG4gICAgfSk7XG5cbiAgfVxuXG4gIGdldEdvb2dsZUxvZ2luKCkge1xuICAgIHJldHVybiB0aGlzLmF1dGhPYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGU8Ym9vbGVhbiB8IFQ+KChvYnNlcnZlcikgPT4ge1xuICAgICAgaWYgKCF0aGlzLmF1dGgyKSB7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKCdBdXRoIGluc3RhbmNlIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmF1dGgyLmdyYW50T2ZmbGluZUFjY2VzcygpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHRoaXMuc2VuZEF1dGhvcml6YXRpb24ocmVzLmNvZGUpLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRVc2VyVG9rZW4oZGF0YSkuc3Vic2NyaWJlKChkOiBUKSA9PiB7XG4gICAgICAgICAgICAgdGhpcy5zZXRDb29raWVEYXRhKGRhdGEpXG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQoZCk7XG4gICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIH0pO1xuXG4gIH1cblxuICBnZXRVc2VyRGV0YWlscygpIHtcbiAgICBsZXQgdXNlciA9IHRoaXMuZ2V0VXNlckNvb2tpZVZhbHVlKCk7XG4gICAgdmFyIHVybCA9IHRoaXMuY29uZmlnLnVzZXIuYXV0aGVudGljYXRlVXNlclVybDtcbiAgICB1cmw9YCR7dXJsfT91c2VySWQ9JHtlbmNvZGVVUklDb21wb25lbnQodXNlcil9YFxuICAgIHJldHVybiB0aGlzLmh0dHBIYW5kbGVyLmdldCh1cmwpO1xuICB9XG5cbiAgZ2V0VG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlck9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZTxib29sZWFuIHwgVD4oKG9ic2VydmVyKSA9PiB7XG4gICAgICB0aGlzLmdldFVzZXJEZXRhaWxzKCkuc3Vic2NyaWJlKCh1c2VyRGV0YWlscykgPT4ge1xuICAgICAgICB0aGlzLmdldFVzZXJUb2tlbih1c2VyRGV0YWlscykuc3Vic2NyaWJlKChkOiBUKSA9PiB7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dChkKTtcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHNldEdvb2dsZUxvZ2luUmVzcG9uc2UoZ29vZ2xlUmVzcG9uc2UpIHtcbiAgICB0aGlzLmxvZ2luUmVzcG9uc2VzdWJqZWN0Lm5leHQoZ29vZ2xlUmVzcG9uc2UpO1xuXG4gIH1cblxuICBnZXRHb29nbGVMb2dpblJlc3BvbnNlKCk6IE9ic2VydmFibGU8R29vZ2xlTG9naW5SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmxvZ2luUmVzcG9uc2VzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cblxuICBpc1VzZXJBdXRoZW50aWNhdGVkKCkge1xuICAgIGxldCB1c2VyQ29va2llID0gdGhpcy5nZXRVc2VyQ29va2llVmFsdWUoKTtcbiAgICBpZiAodXNlckNvb2tpZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBnZXRVc2VyQ29va2llVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29va2llU2VydmljZS5nZXQodGhpcy5jb25maWcudXNlci51c2VyQ29va2llKTtcbiAgfVxuXG4gIHNlbmRBdXRob3JpemF0aW9uKHRva2VuKSB7XG4gICAgY29uc3QgdXJsID0gdGhpcy5jb25maWcuYXV0aENvZGVVcmw7XG4gICAgY29uc3QgaGVhZGVyVG9rZW4gPSB7XG4gICAgICBrZXk6ICdhdXRoLWNvZGUnLFxuICAgICAgdmFsdWU6IHRva2VuXG4gICAgfTtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKHsgJ2F1dGgtY29kZSc6IGhlYWRlclRva2VuLnZhbHVlIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IGhlYWRlcnMgfTtcbiAgICByZXR1cm4gdGhpcy5odHRwSGFuZGxlci5wb3N0KHVybCwgbnVsbCwgb3B0aW9ucyk7XG4gIH1cblxuICBnZXRVc2VyVG9rZW4odXNlckNyZWRlbnRpYWwpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdXNlcm5hbWU6IHVzZXJDcmVkZW50aWFsLnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHVzZXJDcmVkZW50aWFsLnBhc3N3b3JkLFxuICAgICAgZ3JhbnRfdHlwZTogJ3Bhc3N3b3JkJ1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuZ2V0VG9rZW5Gcm9tU2VydmVyKGRhdGEpO1xuICB9XG5cbiAgZ2V0VXNlclRva2VuRnJvbVJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW4pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbidcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmdldFRva2VuRnJvbVNlcnZlcihkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VG9rZW5Gcm9tU2VydmVyKGRhdGEpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGNvbnN0IHVybCA9IHRoaXMuY29uZmlnLnVzZXJUb2tlblNlcnZlclVybDtcbiAgICBjb25zdCB1cmxFbmNvZGVkRGF0YSA9IHRoaXMuZ2V0RW5jb2RlZERhdGEoZGF0YSk7XG4gICAgY29uc3QgaGVhZGVyVG9rZW4gPSB7XG4gICAgICBrZXk6ICdBdXRob3JpemF0aW9uJyxcbiAgICAgIHZhbHVlOiAnQmFzaWMgJyArIGJ0b2EoYCR7dGhpcy5jb25maWcuYXV0aC5zZXJ2ZXIuY2xpZW50X2lkfToke3RoaXMuY29uZmlnLmF1dGguc2VydmVyLmNsaWVudF9zZWNyZXR9YClcbiAgICB9O1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoeyBBdXRob3JpemF0aW9uOiBoZWFkZXJUb2tlbi52YWx1ZSB9KS5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7IGhlYWRlcnMgfTtcblxuICAgIHJldHVybiB0aGlzLmh0dHBIYW5kbGVyLnBvc3QodXJsLCB1cmxFbmNvZGVkRGF0YSwgb3B0aW9ucyk7XG4gIH1cblxuICBwcml2YXRlIGdldEVuY29kZWREYXRhKGRhdGEpIHtcbiAgICBjb25zdCB1cmxFbmNvZGVkRGF0YVBhaXJzID0gW107XG4gICAgZm9yIChjb25zdCBuYW1lIGluIGRhdGEpIHtcbiAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIHVybEVuY29kZWREYXRhUGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtuYW1lXSkpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB1cmxFbmNvZGVkRGF0YSA9IHVybEVuY29kZWREYXRhUGFpcnMuam9pbignJicpLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xuICAgIHJldHVybiB1cmxFbmNvZGVkRGF0YTtcbiAgfVxuXG4gIGxvZ291dFVzZXIoKSB7XG4gICAgbGV0IHVzZXJDb29raWUgPSB0aGlzLmdldFVzZXJDb29raWVWYWx1ZSgpXG4gICAgbGV0IHVybCA9IGAke3RoaXMuY29uZmlnLmxvZ291dC5sb2dvdXRVcmx9YDtcbiAgICBpZiAodXNlckNvb2tpZSkge1xuICAgICAgdGhpcy5jb29raWVTZXJ2aWNlLmRlbGV0ZSh0aGlzLmNvbmZpZy51c2VyLnVzZXJDb29raWUsICcvJywgJy5jaGFsby5jb20nKTtcbiAgICAgIHVybCA9IGAke3VybH0/dXNlcklkPSR7dXNlckNvb2tpZX1gXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmh0dHBIYW5kbGVyLnBvc3QodXJsLCB7fSwgeyByZXNwb25zZVR5cGU6ICd0ZXh0JyB9KVxuICB9XG5cbiAgdXBkYXRlVXNlclN0YXRlKCkge1xuICAgIGxldCB1c2VyQ29va2llID0gdGhpcy5nZXRVc2VyQ29va2llVmFsdWUoKVxuICAgIC8vIHRoaXMuY29va2llU2VydmljZS5zZXQodGhpcy5jb25maWcudXNlci5sb2dpblN0YXRlQ29va2llLCB0aGlzLmVuY3J5cHRDb29raWUoJ2xvZ2dlZE91dCcpLCA3LCAnLycsIG51bGwsIGZhbHNlLCAnTGF4JylcblxuICAgIHRoaXMuY29va2llU2VydmljZS5zZXQodGhpcy5jb25maWcudXNlci5sb2dpblN0YXRlQ29va2llLCB0aGlzLmVuY3J5cHRDb29raWUoJ2xvZ2dlZE91dCcpLCA3LCAnLycsICcuY2hhbG8uY29tJywgZmFsc2UsICdMYXgnKVxuICAgIGlmICh1c2VyQ29va2llKSB7XG4gICAgICAvLyB0aGlzLmNvb2tpZVNlcnZpY2UuZGVsZXRlKHRoaXMuY29uZmlnLnVzZXIudXNlckNvb2tpZSwgJy8nKTtcbiAgICAgIHRoaXMuY29va2llU2VydmljZS5kZWxldGUodGhpcy5jb25maWcudXNlci51c2VyQ29va2llLCAnLycsICcuY2hhbG8uY29tJyk7XG4gICAgfVxuICB9XG5cbiAgc2VuZExvZ291dE1lc3NhZ2UobXNnOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN1YmplY3QubmV4dCh7IG1lc3NhZ2U6IG1zZyB9KTtcbiAgfVxuXG4gIGdldExvZ291dE1lc3NhZ2UoKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICB9XG5cbiAgZW5jcnlwdENvb2tpZShzdHJpbmdUb0VuY3J5cHQpIHtcbiAgICB2YXIga2V5ID0gQ3J5cHRvSlMuZW5jLlV0ZjgucGFyc2UoJ3dlYl9jaGFsb19hcHBrZXknKTtcbiAgICB2YXIgZW5jcnlwdGVkU3RyaW5nID0gQ3J5cHRvSlMuQUVTLmVuY3J5cHQoc3RyaW5nVG9FbmNyeXB0LCBrZXksIHtcbiAgICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuRUNCLFxuICAgICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlplcm9QYWRkaW5nXG4gICAgfSk7XG4gICAgcmV0dXJuIGVuY3J5cHRlZFN0cmluZy50b1N0cmluZygpXG4gIH1cblxuICBkZWNyeXB0U3RyaW5nKGVuY3J5cHRlZFN0cmluZykge1xuICAgIHZhciBrZXkgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZSgnd2ViX2NoYWxvX2FwcGtleScpO1xuICAgIHZhciBkZWNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChlbmNyeXB0ZWRTdHJpbmcsIGtleSwge1xuICAgICAgbW9kZTogQ3J5cHRvSlMubW9kZS5FQ0IsXG4gICAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuWmVyb1BhZGRpbmdcbiAgICB9KTtcbiAgICByZXR1cm4gZGVjcnlwdGVkLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTtcbiAgfVxuXG4gIGdldFVzZXJDb29raWUoKXtcbiAgICBsZXQgZW5jcnlwdGVkQ29va2llPXRoaXMuZ2V0VXNlckNvb2tpZVZhbHVlKCk7XG4gICAgbGV0IGRlY3J5cHRlZFVzZXJDb29raWU7XG4gICAgaWYoZW5jcnlwdGVkQ29va2llKSBkZWNyeXB0ZWRVc2VyQ29va2llPSB0aGlzLmRlY3J5cHRTdHJpbmcoZW5jcnlwdGVkQ29va2llKTtcbiAgICByZXR1cm4gZGVjcnlwdGVkVXNlckNvb2tpZTtcbiAgfVxuXG4gIHNlbmRPdHAobnVtYmVyKXtcbiAgICBsZXQgdXJsPWAke3RoaXMuY29uZmlnLnNlbmRPdHBVcmx9YFxuICAgcmV0dXJuIHRoaXMuaHR0cEhhbmRsZXIucG9zdCh1cmwse1wibnVtYmVyXCI6bnVtYmVyfSlcbiAgfVxuXG4gIHZhbGlkYXRlVXNlcihib2R5KXtcbiAgICBsZXQgdXJsPWAke3RoaXMuY29uZmlnLnZhbGlkYXRlVXNlclVybH1gXG4gICAgcmV0dXJuIHRoaXMuaHR0cEhhbmRsZXIucG9zdCh1cmwsIGJvZHkpXG4gIH1cblxuICB2YWxpZGF0ZU90cChvdHAsbnVtYmVyKXtcbiAgICBsZXQgdXJsPWAke3RoaXMuY29uZmlnLnZhbGlkYXRlT3RwVXJsfWBcbiAgICBsZXQgcGFyYW1zID0gdGhpcy5nZXRVUkxTZWFyY2hQYXJhbXMoKVxuICAgIC5zZXQoXCJvdHBcIiwgb3RwKVxuICAgIC5zZXQoXCJtb2JpbGVcIiwgbnVtYmVyKTtcbiAgICByZXR1cm4gdGhpcy5odHRwSGFuZGxlci5nZXQodXJsLCB7cGFyYW1zfSk7XG4gIH1cblxuICBnZXRNb2JpbGVUb2tlbihvdHAsbnVtYmVyKXtcbiAgICByZXR1cm4gdGhpcy51c2VyT2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlPGJvb2xlYW4gfCBUPigob2JzZXJ2ZXIpID0+IHtcbiAgICAgIHRoaXMudmFsaWRhdGVPdHAob3RwLG51bWJlcikuc3Vic2NyaWJlKCh1c2VyRGV0YWlscykgPT4ge1xuICAgICAgICB0aGlzLmdldFVzZXJUb2tlbih1c2VyRGV0YWlscykuc3Vic2NyaWJlKChkOiBUKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRDb29raWVEYXRhKHVzZXJEZXRhaWxzKTtcbiAgICAgICAgICBvYnNlcnZlci5uZXh0KGQpO1xuICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICB9KVxuICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICBvYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZ2V0VVJMU2VhcmNoUGFyYW1zKCk6IEh0dHBQYXJhbXMge1xuICAgIHJldHVybiBuZXcgSHR0cFBhcmFtcygpO1xuICB9XG5cbiAgc2V0Q29va2llRGF0YShkYXRhKXtcbiAgICBpZiAoZGF0YVsndXNlcklkJ10pIHtcbiAgICAgIHZhciBlbmNyeXB0ZWRTdHJpbmcgPSB0aGlzLmVuY3J5cHRDb29raWUoZGF0YVsndXNlcklkJ10pO1xuICAgICAgdGhpcy5jb29raWVTZXJ2aWNlLnNldCh0aGlzLmNvbmZpZy51c2VyLnVzZXJDb29raWUsZW5jcnlwdGVkU3RyaW5nLCA3LCAnLycsICcuY2hhbG8uY29tJyxmYWxzZSwnTGF4Jyk7XG4gICAgICAvLyB0aGlzLmNvb2tpZVNlcnZpY2Uuc2V0KHRoaXMuY29uZmlnLnVzZXIudXNlckNvb2tpZSwgZW5jcnlwdGVkU3RyaW5nLCA3LCAnLycsIG51bGwsIGZhbHNlLCAnTGF4Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb29raWVTZXJ2aWNlLnNldCh0aGlzLmNvbmZpZy51c2VyLmxvZ2luU3RhdGVDb29raWUsdGhpcy5lbmNyeXB0Q29va2llKCdsb2dnZWRJbicpLCA3LCAnLycsJy5jaGFsby5jb20nLGZhbHNlLCdMYXgnKVxuICAgIC8vIHRoaXMuY29va2llU2VydmljZS5zZXQodGhpcy5jb25maWcudXNlci5sb2dpblN0YXRlQ29va2llLCB0aGlzLmVuY3J5cHRDb29raWUoJ2xvZ2dlZEluJyksIDcsICcvJywgbnVsbCwgZmFsc2UsICdMYXgnKVxuICB9XG5cbn1cbiJdfQ==