{"version":3,"file":"generic-list-filter.js","sources":["../../../projects/generic-list-filter/src/lib/generic-list-filter.component.ts","../../../projects/generic-list-filter/src/lib/generic-list-filter.module.ts","../../../projects/generic-list-filter/src/public-api.ts","../../../projects/generic-list-filter/src/generic-list-filter.ts"],"sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter  } from '@angular/core';\nimport * as moment from 'moment';\nimport * as _ from 'lodash';\n\n@Component({\n  selector: 'app-filter',\n  templateUrl: './filter.component.html',\n  styleUrls: ['./filter.component.scss']\n})\nexport class GenericListFilterComponent implements OnInit {\n  @Input() list;\n  @Input() paramList;\n  @Output() onFilterChange = new EventEmitter();\n\n\n  filterKeys1;\n  selectedFilterTabType1; \n  selectedValues = [];\n  selectedCategory = {\n    type:'',\n    value:''\n  };\n  filters;\n  listCopy;\n\n\n  filterKeys;\n  isFiltersApplied = false;\n  openFilterBar: boolean = false;\n  timeFilter: boolean = false;\n  allAppliedFilters;\n  fromTime;\n  toTime;\n  searchKey = '';\n  isCountClicked = false;\n  isData = false;\n  isStatus = false;\n  step;\n  category;\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(): void {\n    //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\n    //Add '${implements OnChanges}' to the class.\n    setTimeout(() => {\n      this.filterKeys1 = Object.keys(this.list);\n      this.selectedFilterTabType1 = this.filterKeys1[0];\n      this.fromTime = this.paramList.fromTime;\n      this.toTime = this.paramList.toTime;\n      this.listCopy = JSON.parse(JSON.stringify(this.list)) ;\n      this.isStatus = this.list.isStatus;\n      this.category = this.list.category;\n      this.isData = true;\n    }, 2000);\n  }\n\n  openFilterSideBar() {\n    this.searchKey = '';\n    this.list[this.selectedFilterTabType1] = this.listCopy[this.selectedFilterTabType1];\n    this.openFilterBar = !this.openFilterBar;\n  }\n\n  onCancel() {\n    this.openFilterBar = false;\n  }\n\n\n\n  onRemoveFilter(item) {\n    if (item == 'time') {\n      this.fromTime = moment().subtract(3, 'hours').format('LT');\n      this.toTime = moment().format('LT');\n      this.timeFilter = false;\n    }\n    delete this.allAppliedFilters[item];\n    this.selectedValues = this.selectedValues.filter(obj => {\n      return obj.type !== item;\n    });\n    console.log(item,this.allAppliedFilters,this.selectedValues);\n    this.applyFilters();\n  }\n\n\n\n  applyFilters() {\n    this.isFiltersApplied = true;\n    this.openFilterBar = false;\n    let allAppliedFilters = {};\n    this.selectedValues.forEach(item => {\n      allAppliedFilters[item.type] = item.value;\n    });\n  \n    if (this.timeFilter) {\n      allAppliedFilters['time'] = `${this.fromTime} to ${this.toTime}`;\n    }\n    console.log(allAppliedFilters);\n    this.allAppliedFilters = allAppliedFilters;\n    this.filterKeys = Object.keys(this.allAppliedFilters);\n    this.filterChange();\n  }\n\n  setTime(type: string, event) {\n    this.timeFilter = true;\n    if (type === \"fromTime\") {\n      this.fromTime = event;\n    } else {\n      this.toTime = event;\n    };\n  }\n\n\n  filterChange() {\n    let filters = {\n      isFilter: true,\n      appliedFilterValues:this.allAppliedFilters,\n      fromTime : this.timeFilter ? this.fromTime : '',\n      toTime : this.timeFilter ? this.toTime : ''\n    }\n    console.log(filters);\n    this.onFilterChange && this.onFilterChange.emit(filters);\n  }\n\n  openRestAppliedFilters() {\n    this.isCountClicked = true;\n  }\n\n\n  selectedFilterTab(type) {\n    this.searchKey = '';\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == type;\n    });\n    if(indx > -1) {\n      this.selectedCategory = {type:type,value:this.selectedValues[indx].value};\n      this.selectFilter(this.selectedCategory.value,this.selectedCategory.type);\n    }\n    this.selectedFilterTabType1 = type;\n  }\n\n  isFilterExists(filter) {\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == filter && item.value;\n    });\n    if(indx > -1) {\n      return true;\n    }\n  }\n\n\n  selectFilter(item, type) {\n    let value = {\n      type : type,\n      value: item\n    };\n    let indx = _.findIndex(this.selectedValues,(item) => {\n      return item.type == type;\n    });\n\n    if(indx > -1) {\n      this.selectedValues[indx].value = item;\n      this.selectedCategory = {type:type,value:this.selectedValues[indx].value};\n    } else {\n      this.selectedValues.push(value);\n      this.selectedCategory = {type:type,value:item};\n    }\n    console.log(this.selectedValues,this.selectedCategory);\n  }\n\n\n\n\n  resetAllFilters() {\n    this.fromTime = moment().subtract(3, 'hours').format('LT');\n    this.toTime = moment().format('LT');\n    this.isFiltersApplied = false;\n    this.timeFilter = false;\n    this.openFilterBar = false;\n    this.searchKey = '';\n    this.filterKeys = '';\n    this.allAppliedFilters = {};\n    this.selectedValues = [];\n    this.selectedFilterTabType1 = this.filterKeys1[0];\n    this.selectedCategory = {\n      type:'',\n      value:''\n    };\n    this.isCountClicked = false;\n    this.filterChange();\n  }\n\n  filterData(searchValue?) {\n    this.list[this.selectedFilterTabType1] = this.listCopy[this.selectedFilterTabType1]; \n    let filterArr = this.list[this.selectedFilterTabType1];\n    if (filterArr && filterArr.length) {\n      const data = filterArr.filter((item) => {\n        return (item.toLowerCase().startsWith(searchValue.trim().toLowerCase()));\n      });\n      console.log(this.searchKey,searchValue,\"data=>\"+data,this.list[this.selectedFilterTabType1])\n      this.list[this.selectedFilterTabType1] = [...data];\n    }\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { NgxMaterialTimepickerModule } from 'ngx-material-timepicker';\nimport { GenericListFilterComponent } from './generic-list-filter.component';\n\n\n\n@NgModule({\n  declarations: [GenericListFilterComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    NgxMaterialTimepickerModule\n  ],\n  exports: [GenericListFilterComponent]\n})\nexport class GenericListFilterModule { }\n","/*\n * Public API Surface of generic-list-filter\n */\n\nexport * from './lib/generic-list-filter.component';\nexport * from './lib/generic-list-filter.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["_.findIndex"],"mappings":"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"}